
# 하드월렛이 뭔가요?

비트코인을 사용하는 데에 있어서 또 한 가지 중요한 개념은 바로 하드월렛입니다. 비트코인 네트워크에 이미 적극적으로 참여하고 있는 사람이 아니라면, 사실 비트코인 입문 단계에서 가장 중요한 것은 바로 하드월렛입니다.

대부분의 가상화폐 이용자들은 굳이 하드월렛이라는 걸 추가로 사는 경우 없이 소프트월렛으로 들고 있거나, 월렛을 생성할 때 나오는 비밀키도 적당히 그냥 메모장에 복사하여 파일로 저장해두는 경우가 많습니다.

하드월렛은 인터넷에 연결되지 않은 상태, 즉 '에어갭' 상태를 유지하며, 그러한 리스크들을 최대한 피하기 위해서 사용하는 장비입니다. 그리고 사용자의 입장에서는 비트코인을 정신적으로 진지하게 대하기 시작하는 중요한 관문이 되기도 합니다.

## 인터넷 연결 없이 어떻게 쓸 수가 있죠?

트랜잭션을 성사시키기 위해선 인터넷 연결이 필요하다, 이것은 많은 사람들이 일반적으로 가지고 있는 인식입니다. 그리고 하드월렛도 어떤 식으로든 그런 역할을 수행할 것이라고 보는 사람들이 많을 것입니다.

하지만 에어갭 하드월렛은 그런 식으로 작동하지 않습니다. 물론, 트랜잭션을 전파하려는 장비 자체는 인터넷에 연결되어 있어야 하는 게 맞습니다. 하지만 트랜잭션을 전파하는 과정에서, 하드월렛은 전혀 인터넷에 연결되지 않습니다.

방식은 이러합니다. 인터넷에 연결된 장비가 트랜잭션을 성사시키려고 할 때, QR 코드를 하나 띄웁니다. 그리고 하드월렛은 그 QR 코드를 인식하여 다시 자신만의 QR 코드를 다시 띄웁니다. 이것을 '서명(signature)'이라고 합니다. 그리고 인터넷에 연결된 장비 쪽에서 그 하드월렛의 QR 코드를 다시 인식해서 트랜잭션을 전파시키면, 그때부터 실질적으로 거래가 성사되기 시작하는 것입니다.

각각의 풀노드는 해당 트랜잭션이 정말 소유주가 보내려 하는 트랜잭션이 맞는지 검사하고, 프로토콜과 일치할 경우 트랜잭션의 일부로 포함시킵니다. 그리고 그러한 트랜잭션은 점차 퍼지면서, 비트코인을 다른 주소로 보낸 것으로 여겨지게 됩니다.

## 중요한 것은 니모닉이라는 비밀키

하드월렛에서 월렛을 생성할 때 일반적으로 12단어, 또는 24단어를 사용하여 
'니모닉(Mnemonic)'이라는 것을 만들게 됩니다.

그리고 그렇게 생성한 니모닉이 사실상 그 자체로 월렛의 역할을 수행하게 됩니다. 니모닉이 어떤지에 따라서 주소도 1번, 2번, 이런 식으로 나오게 되고, 서명을 생성할 때에도 소유주가 맞음을 입증하는 방법으로 쓰이게 됩니다. 하드월렛이라는 것은 어찌 보면 니모닉에서 파생되는 그러한 요소들을 알아서 자동으로 계산해주는 그런 편리한 기계일 뿐입니다.

하드월렛은 인터넷에 연결되지 않기 때문에, 하드월렛에서 월렛의 잔액을 확인하는 것도 불가능합니다. 그 대신에, Watch-Only 월렛이라는 것을 만들어서 보내는 기능은 없이 주소를 보는 것만 가능하게 하는 다른 월렛을 생성할 수 있습니다.

Watch-Only 월렛이 없다면 월렛이 생성한 각각의 주소들은 사실 제3자 입장에서 연관성을 특정짓는 것이 매우 어렵습니다. 각각의 트랜잭션이나 주소는 그저 서로 아무 연관도 없어 보이는 것들로 보일 뿐입니다. 그래서 한번 월렛을 생성해두고, 계속해서 주소를 바꿔서 사용하면, 다른 사람들은 각각의 주소로 갔다는 사실만 알 뿐, 그것들이 사실 하나의 월렛이라는 점은 파악하지 못할 것입니다. 그래서 한번 썼던 주소를 재사용하지 않는 것은 비트코인을 쓰는 데 있어서 중요한 덕목 중 하나이기도 합니다.

## 하드월렛의 랜덤 생성에 너무 의존하지 않을 것

입문자 입장에선 랜덤 생성이라고 하니 적당히 믿고 랜덤 생성된 니모닉을 썼을 수도 있습니다. 하지만, 이런 시나리오를 생각해 볼 수 있습니다.

만약에 하드월렛 제조 업체가, 기계마다 니모닉이 자동 생성되는 방식을 알고 있다면 어떻게 될까요? 기계마다 1번 랜덤키, 2번 랜덤키, 이런 식으로 추적을 할 수 있게 설계해 두었다면 말입니다. 그렇다면 유저가 랜덤 생성 기능을 사용한 이상, 100번 후보 정도까지만 가 봐도 높은 확률로 잔액이 어느 정도 있는 월렛을 발견할 수 있게 될 것입니다.

물론 실제로 이런 시나리오가 발생하겠냐는 생각이 들 수도 있겠지만, 한번 이런 생각이 든 이상, 그러고 보니 물리적으로 가능하긴 할 것 같다는 생각을 지울 수가 없을 것입니다.

그런 찜찜함을 지우려면, 본인이 정말 어떤 식으로든 자연적인 랜덤성을 생성해야만 합니다. 예를 들어 주사위를 굴리는 행위 등이 있습니다. 그리고 그렇게 해야만, 그제서야 비로소 비트코인 이론에서 얘기하는 대로 0에 가까운 확률이 나오는 것입니다. 그전까진 0에 가깝다기 보단, 0보다 조금 높거나, 아니면 다소 높은 확률이라고 볼 수 있을 것입니다.

만약 이미 랜덤 생성된 월렛에 넣어둔 비트코인이 있다면, 새로 니모닉을 직접 랜덤 생성하여 해당 월렛으로 옮길 것을 강력하게 추천합니다. 물론 업체 입장에서도 자신의 신뢰 문제가 있기 때문에 어지간해선 그렇게 하지 않겠지만, 어디까지나 남아 있는 가능성을 지우는 일이니까요.

## 니모닉만으로 불안하다면 패스프레이즈까지

사실 니모닉만 생성해도 확률은 이미 충분히 0에 가깝긴 합니다만, 막상 쓰고 있는 입장에선 이런 생각이 들 수 있습니다. '만약에, 진짜 만에 하나 다른 사람이랑 니모닉이 겹치면 어떡하지'? 그럴 경우, 진짜 그 남아 있는 가능성마저도 지우는 방법이 있기는 합니다. 바로 '패스프레이즈(passphrase)'라는 기능입니다. 패스프레이즈는 웹사이트에서 자기만의 비밀번호를 만드는 것처럼, 니모닉에 자신만의 비밀번호를 추가하는 방법입니다. 니모닉이 겹칠 확률도 이미 낮은데, 패스프레이즈까지 겹칠 가능성은 더욱더 낮겠죠? 다만, 패스프레이즈는 정말 고급 사용자용입니다. 잊어 버리면 절대 안 되니 주의하세요!

## 정리

- 하드월렛에서 중요한 것은 '에어갭' 개념이다.
- 본인이 직접 자연적인 '랜덤성'을 만드는 것이 중요하다.
